<?xml version="1.0"?>
<configuration>
  <configSections>
    <section name="unity" type="Microsoft.Practices.Unity.Configuration.UnityConfigurationSection, Microsoft.Practices.Unity.Configuration" />
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,log4net" />
  </configSections>
  <connectionStrings>
    <add name="EntityFwTestEntities" connectionString="metadata=res://*/Entities.AdventureWorks.csdl|res://*/Entities.AdventureWorks.ssdl|res://*/Entities.AdventureWorks.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=localhost;initial catalog=EntityFwTest;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
  <appSettings>
    <add key="ClientSettingsProvider.ServiceUri" value="" />
  </appSettings>
  <log4net debug="true">
    <root>
      <priority value="ALL" />
      <appender-ref ref="RollingLogFileAppender" />
    </root>
    <appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
      <file value=".\\Logs\\JA.FinancePark.Test.log" />
      <appendToFile value="true" />
      <rollingStyle value="Date" />
      <datePattern value="'_'yyyyMMdd" />
      <!-- keep at most 10 logs - the more logs you keep,
                                        the slower the rolling will be (adjust to your needs) -->
      <maxSizeRollBackups value="5" />
      <countDirection value="1" />
      <maximumFileSize value="100MB" />
      <lockingModel type="log4net.Appender.FileAppender.MinimalLock" />
      <staticLogFileName value="false" />
      <PreserveLogFileNameExtension value="true" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%d [%t] %-5p %c [%x] &lt;%X{auth}&gt; - %m%n" />
      </layout>
    </appender>
  </log4net>
  <unity xmlns="http://schemas.microsoft.com/practices/2010/unity">
    <typeAliases>
      <!-- Lifetime manager types -->
      <typeAlias alias="singleton" type="Microsoft.Practices.Unity.ContainerControlledLifetimeManager, Microsoft.Practices.Unity" />
      <typeAlias alias="perThread" type="Microsoft.Practices.Unity.PerThreadLifetimeManager,Microsoft.Practices.Unity" />
      <typeAlias alias="external" type="Microsoft.Practices.Unity.ExternallyControlledLifetimeManager,Microsoft.Practices.Unity" />
    </typeAliases>
    <containers>
      <container name="TestContainer">
        <types>
          <!--Data Access Components-->
          <!-- todo: add mappings here-->
          <register type="JA.FinancePark.Shared.ICustomerDTO, JA.FinancePark.Shared" mapTo="JA.FinancePark.Entities.CustomerDTO, JA.FinancePark.Entities">
          </register>
          <register type="JA.FinancePark.Shared.ICategoryDTO, JA.FinancePark.Shared" mapTo="JA.FinancePark.Entities.CategoryDTO, JA.FinancePark.Entities">
          </register>
          <!--Facades-->
          <register type="JA.FinancePark.Shared.IMasterDataFacade, JA.FinancePark.Shared" mapTo="JA.FinancePark.Business.MasterDataFacade, JA.FinancePark.Business">
          </register>
          <!--Business Domain Components-->
          <register type="JA.FinancePark.Shared.IMasterDataBDC, JA.FinancePark.Shared" mapTo="JA.FinancePark.Business.MasterDataBDC, JA.FinancePark.Business">
          </register>
          <!--Data Access Components-->
          <!-- todo: add mappings here-->
          <register type="JA.FinancePark.Shared.ICustomerDAC, JA.FinancePark.Shared" mapTo="JA.FinancePark.Entities.CustomerDAC, JA.FinancePark.Entities">
          </register>
          <register type="JA.FinancePark.Shared.ICategoryDAC, JA.FinancePark.Shared" mapTo="JA.FinancePark.Entities.CategoryDAC, JA.FinancePark.Entities">
          </register>
          <!--DBAccess-->
          <register type="JA.FinancePark.Entities.Entities.EntityFwTestEntities, JA.FinancePark.Entities" mapTo="JA.FinancePark.Entities.Entities.EntityFwTestEntities, JA.FinancePark.Entities">
          </register>
          <!-- todo: add mappings here-->
          <!-- Others -->
          <register type="JA.FinancePark.Shared.ConfigurationSettings, JA.FinancePark.Shared" mapTo="JA.FinancePark.Shared.ConfigurationSettings, JA.FinancePark.Shared">
          </register>
          <register type="JA.FinancePark.Shared.IExceptionManager, JA.FinancePark.Shared" mapTo="JA.FinancePark.Shared.ExceptionManager, JA.FinancePark.Shared">
          </register>
          <register type="JA.FinancePark.Shared.ILogger, JA.FinancePark.Shared" mapTo="JA.FinancePark.Shared.Log4NetLogger, JA.FinancePark.Shared">
          </register>
        </types>
      </container>
    </containers>
  </unity>
  <system.web>
    <customErrors defaultRedirect="ErrorView/Index" mode="RemoteOnly" />
    <sessionState timeout="20" />
    <membership defaultProvider="ClientAuthenticationMembershipProvider">
      <providers>
        <clear />
        <add name="ActiveDirectoryProvider" type="System.Web.Security.ActiveDirectoryMembershipProvider" connectionStringName="ADConnectionString" connectionUsername="Administrator" connectionPassword="Passw0rd" />
        <add name="ClientAuthenticationMembershipProvider" type="System.Web.ClientServices.Providers.ClientFormsAuthenticationMembershipProvider, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" serviceUri="" />
      </providers>
    </membership>
    <compilation debug="true" targetFramework="4.5" />
    <!--<authentication mode="Forms">
      <forms loginUrl="~/Account/LogOn" timeout="20" />
    </authentication>-->
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
    <httpModules>
    </httpModules>
    <globalization culture="en-GB" uiCulture="en-GB" />
    <roleManager defaultProvider="ClientRoleProvider" enabled="true">
      <providers>
        <add name="ClientRoleProvider" type="System.Web.ClientServices.Providers.ClientRoleProvider, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" serviceUri="" cacheTimeout="86400" />
      </providers>
    </roleManager>
  </system.web>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
  </startup>
</configuration>